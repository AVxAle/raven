<?xml version="1.0" encoding="UTF-8"?>
<Simulation>
<RunInfo>
    <WorkingDir>/Users/alfoa/projects/trunk/raven/WorkShop</WorkingDir>
    <Files>1_settings.txt,2_temperature.txt,3_fissionrate.txt,4_specificpower.txt,5_hydrostaticstress.txt</Files>
    <Sequence>FirstMRun</Sequence>
    <batchSize>8</batchSize>
</RunInfo>

<Models>
    <Code name='ExampleCode' subType='ExampleCode'>
        <executable>/Users/alfoa/projects/trunk/raven/WorkShop/HOBO/Hobo_Raven.exe</executable>
    </Code>
</Models>
<OutStreamManager>
    <Print name='HoboHistories'>
        <type>csv</type>
        <source>stories</source>
    </Print>
    <Print name='HoboTimePointSet'>
        <type>csv</type>
        <source>timePointset</source>
    </Print>
    <Plot name='HoboHistoriesPlot' dim='2' overwrite='True'>
        <plotSettings>
            <plot>
                <type>line</type>
                <x>stories|Output|t_h</x>
                <y>stories|Output|fgr_fract</y>
                <interpPointsX>50</interpPointsX>
                <interpPointsY>50</interpPointsY>
            </plot>
            <xlabel>time (hours)</xlabel>
            <ylabel>FGR (/)</ylabel>
        </plotSettings>
        <actions>
            <how>pdf</how>
            <title>
                <text> </text>
            </title>
        </actions>
    </Plot>
    <Plot name='HoboSampledPorosity' dim='2' overwrite='True'>
        <plotSettings>
            <plot>
                <type>histogram</type>
                <x>timePointset|Input|grn_radius_m</x>
            </plot>
            <xlabel>Grain Radius (m)</xlabel>
        </plotSettings>
        <actions>
            <how>pdf</how>
            <title>
                <text> </text>
            </title>
        </actions>
    </Plot>
    <Plot name='HoboSampledGrainRadius' dim='2' overwrite='True'>
        <plotSettings>
            <plot>
                <type>histogram</type>
                <x>timePointset|Input|porosity</x>
            </plot>
            <xlabel>Porosity (-)</xlabel>
        </plotSettings>
        <actions>
            <how>pdf</how>
            <title>
                <text> </text>
            </title>
        </actions>
    </Plot>
</OutStreamManager>
<Distributions>
    <Normal name='initial_porosity_dist'>
        <mean>0.05</mean>
        <sigma>0.001</sigma>
        <lowerBound>0.01</lowerBound>
        <upperBound>0.10</upperBound>
    </Normal>
    <Normal name='grn_radius_dist'>
        <mean>1.e-06</mean>
        <sigma>2.0e-6</sigma>
        <lowerBound>1.e-07</lowerBound>
        <upperBound>1.e-05</upperBound>
    </Normal>
</Distributions>

<Samplers>
    <MonteCarlo     name='MonteCarloOnExternalCode'  limit='100'>
        <variable name='1_settings|row|12' >
            <distribution>initial_porosity_dist</distribution>
        </variable>
        <variable name='1_settings|row|10' >
            <distribution>grn_radius_dist</distribution>
        </variable>
    </MonteCarlo>
</Samplers>

<Steps>
    <MultiRun name='FirstMRun' re-seeding='1' pauseAtEnd='True'>
        <Input   class='Files'            type=''            >1_settings.txt</Input>
        <Input   class='Files'            type=''            >2_temperature.txt</Input>
        <Input   class='Files'            type=''            >3_fissionrate.txt</Input>
        <Input   class='Files'            type=''            >4_specificpower.txt</Input>
        <Input   class='Files'            type=''            >5_hydrostaticstress.txt</Input>
        <Model   class='Models'           type='Code'        >ExampleCode</Model>
        <Sampler class='Samplers'         type='MonteCarlo'  >MonteCarloOnExternalCode</Sampler>
        <Output  class='DataBases'        type='HDF5'        >testMCDataBase</Output>
        <Output  class='Datas'            type='Histories'   >stories</Output>
        <Output  class='Datas'            type='TimePointSet'>timePointset</Output>
        <Output  class='OutStreamManager' type='Print'       >HoboHistories</Output>
        <Output  class='OutStreamManager' type='Print'       >HoboTimePointSet</Output>
        <Output  class='OutStreamManager' type='Plot'        >HoboHistoriesPlot</Output>
        <Output  class='OutStreamManager' type='Plot'        >HoboSampledGrainRadius</Output>
        <Output  class='OutStreamManager' type='Plot'        >HoboSampledPorosity</Output>
    </MultiRun >
</Steps>
<DataBases>
    <HDF5 name="testMCDataBase"/> 
</DataBases>
<Datas>
    <Histories name='stories'>
        <Input>porosity,grn_radius_m</Input>
        <Output>t_h,fgr_fract,burn_up_MWd/tU</Output>
   </Histories>
    <TimePointSet name='timePointset'>
        <Input>porosity,grn_radius_m</Input>
        <Output>t_h,fgr_fract,burn_up_MWd/tU</Output>
    </TimePointSet>
</Datas>
</Simulation>



