<Simulation verbosity="all">
	

<RunInfo>
  <WorkingDir>limitSurfaceMultiGrid</WorkingDir>
  <Sequence>GoalOrientedStep,push_limitsurface_in_database</Sequence>
  <batchSize>50</batchSize>
</RunInfo>

<Steps>
  <MultiRun name="GoalOrientedStep" pauseAtEnd='False'>
    <Input   class="DataObjects"             type="Point"              >inputPlaceHolder</Input>
    <Model   class="Models"                  type="ExternalModel"      >PythonModule</Model>
    <Sampler class="Samplers"                type="LimitSurfaceSearch" >workshopAdaptive</Sampler>
    <Output  class="DataObjects"             type="PointSet"           >outAdaptive</Output>
    <SolutionExport class="DataObjects"      type="PointSet"           >limitSurface</SolutionExport>
    <Output         class='OutStreamManager' type='Print'              >limitSurfaceTwoIslandsCSV</Output>
  </MultiRun>
  <IOStep name="push_limitsurface_in_database" pauseAtEnd="False">
    <Input   class="DataObjects"        type="PointSet"                >limitSurface</Input>
    <Output  class='OutStreamManager'   type='Print'                   >limitSurfaceTwoIslandsCSV</Output>
  </IOStep>

</Steps>

<DataObjects>
    <PointSet name="outAdaptive">
        <Input>x1,x2</Input>
        <Output>y4,failure</Output>
    </PointSet>
    <PointSet name="limitSurface">
        <Input>x1,x2</Input>
        <Output>goalFunction</Output>
    </PointSet>
    <Point name="inputPlaceHolder">
        <Input>x1,x2</Input>
        <Output>OutputPlaceHolder</Output>
    </Point>
</DataObjects>


<Distributions>
    <Normal name='normal_trunc'>
        <mean>0</mean>
        <sigma>1.5</sigma>
        <lowerBound>-5</lowerBound>
        <upperBound>5</upperBound>
    </Normal>
    <Normal name='normal'>
        <mean>0</mean>
        <sigma>1.2</sigma>
        <lowerBound>-6</lowerBound>
        <upperBound>6</upperBound>
    </Normal>
</Distributions>


<Samplers>
  <LimitSurfaceSearch name = "workshopAdaptive">
    <ROM              class = "Models"    type = "ROM"                 >AccelerationROM</ROM>
    <Function         class = "Functions" type = "External"            >goalFunction</Function>
    <TargetEvaluation class = "DataObjects"     type = "PointSet"  >outAdaptive</TargetEvaluation>
    <Convergence limit = "50000" forceIteration = "False" weight = "CDF" persistence = "15" subGridTol="0.000140625">0.001625</Convergence>
    <variable name = "x1"><distribution>normal_trunc</distribution></variable>
    <variable name = "x2"><distribution>normal</distribution></variable>
  </LimitSurfaceSearch>
</Samplers>


<Models>
    <ExternalModel name="PythonModule" subType="" ModuleToLoad="limitSurfaceMultiGrid/twoIslandsModel">
       <variable>x1</variable>
       <variable>x2</variable>
       <variable>y4</variable>
       <variable>failure</variable>
    </ExternalModel>
    <ROM  name="AccelerationROM" subType="SciKitLearn">
      <Features>x1,x2</Features>
      <Target>goalFunction</Target>
      <SKLtype>svm|SVC</SKLtype>
      <kernel>rbf</kernel>
      <gamma>10</gamma>
      <tol>1e-5</tol>
      <C>50</C>
    </ROM>
</Models>


<Functions>
    <External name="goalFunction" file= "limitSurfaceMultiGrid/goalFunctionTwoIslands">
        <variable>x1</variable>
        <variable>x2</variable>
        <variable>y4</variable>
        <variable>failure</variable>
    </External>
</Functions>


<OutStreamManager> 
  <Print name = "limitSurfaceTwoIslandsCSV">
  	<type>csv</type>
  	<source>limitSurface</source>
  </Print>
</OutStreamManager>



</Simulation>
