<?xml version="1.0" encoding="UTF-8"?>
<Simulation >
    <RunInfo>
        <WorkingDir>IndexSetTest</WorkingDir>
        <Sequence>
            TPmake,TPtrain,TPtest,TPprint,
            TDmake,TDtrain,TDtest,TDprint,
            HCmake,HCtrain,HCtest,HCprint,
            Cmake,Ctrain,Ctest,Cprint
        </Sequence>
        <batchSize>1</batchSize>
    </RunInfo>

    <Distributions>
        <Uniform name="UniDist"><lowerBound>1</lowerBound><upperBound>5</upperBound></Uniform>
    </Distributions>

    <Samplers>
        <SparseGridCollocation name="TPSG" parallel="1">
            <variable name="x1"><distribution>UniDist</distribution></variable>
            <variable name="x2"><distribution>UniDist</distribution></variable>
            <ROM  class='Models' type='ROM' >TPROM</ROM>
        </SparseGridCollocation>

        <SparseGridCollocation name="TDSG" parallel="0">
            <variable name="x1"><distribution>UniDist</distribution></variable>
            <variable name="x2"><distribution>UniDist</distribution></variable>
            <ROM  class='Models' type='ROM' >TDROM</ROM>
        </SparseGridCollocation>

        <SparseGridCollocation name="HCSG" parallel="1">
            <variable name="x1"><distribution>UniDist</distribution></variable>
            <variable name="x2"><distribution>UniDist</distribution></variable>
            <ROM  class='Models' type='ROM' >HCROM</ROM>
        </SparseGridCollocation>

        <SparseGridCollocation name="CSG">
            <variable name="x1"><distribution>UniDist</distribution></variable>
            <variable name="x2"><distribution>UniDist</distribution></variable>
            <ROM  class='Models' type='ROM' >CROM</ROM>
        </SparseGridCollocation>
      </Samplers>

    <Models>
        <Dummy name="MyDummy" subType=""/>
        <ExternalModel name='polynomial' subType='' ModuleToLoad = './IndexSetTest/polynomial'>
            <variable>x1</variable>
            <variable>x2</variable>
            <variable>ans</variable>
        </ExternalModel>
        <ROM name='TPROM' subType='GaussPolynomialRom'>
            <Target>ans</Target>
            <Features>x1,x2</Features>
            <IndexSet>TensorProduct</IndexSet>
            <PolynomialOrder>4</PolynomialOrder>
            <Interpolation quad='Legendre' poly='Legendre' weight='1'>x1</Interpolation>
            <Interpolation quad='Legendre' poly='Legendre' weight='1'>x2</Interpolation>
        </ROM>
        <ROM name='TDROM' subType='GaussPolynomialRom' verbosity='debug'>
            <Target>ans</Target>
            <Features>x1,x2</Features>
            <IndexSet>TotalDegree</IndexSet>
            <PolynomialOrder>4</PolynomialOrder>
            <Interpolation quad='ClenshawCurtis' poly='Legendre' weight='1'>x1</Interpolation>
            <Interpolation quad='ClenshawCurtis' poly='Legendre' weight='1'>x2</Interpolation>
        </ROM>
        <ROM name='HCROM' subType='GaussPolynomialRom' verbosity='debug'>
            <Target>ans</Target>
            <Features>x1,x2</Features>
            <IndexSet>HyperbolicCross</IndexSet>
            <PolynomialOrder>4</PolynomialOrder>
            <Interpolation quad='ClenshawCurtis' poly='Legendre' weight='1'>x1</Interpolation>
            <Interpolation quad='ClenshawCurtis' poly='Legendre' weight='1'>x2</Interpolation>
        </ROM>
        <ROM name='CROM' subType='GaussPolynomialRom' verbosity='debug'>
            <Target>ans</Target>
            <Features>x1,x2</Features>
            <IndexSet>Custom</IndexSet>
            <IndexPoints>
                (0,0),(0,1),(0,2),
                (1,0),(1,1)
            </IndexPoints>
            <PolynomialOrder>4</PolynomialOrder>
        </ROM>
    </Models>

    <Steps>
        <MultiRun name='TPmake' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>TPSG</Sampler>
            <Input   class='DataObjects'      type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='ExternalModel'        >polynomial</Model>
            <Output  class='DataObjects'      type='TimePointSet'         >TPsolns</Output>
        </MultiRun>
        <RomTrainer name='TPtrain'>
            <Input   class='DataObjects'      type='TimePointSet'         >TPsolns</Input>
            <Output  class='Models'           type='ROM'                  >TPROM</Output>
        </RomTrainer>
        <MultiRun name='TPtest' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>TPSG</Sampler>
            <Input   class='DataObjects'      type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='ROM'                  >TPROM</Model>
            <Output  class='DataObjects'      type='TimePointSet'         >TPtests</Output>
        </MultiRun>
        <IOStep name='TPprint'>
            <Input   class='DataObjects'      type='TimePointSet'         >TPtests</Input>
            <Output  class='OutStreamManager' type='Print'                >TPdump</Output>
        </IOStep>

        <MultiRun name='TDmake' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>TDSG</Sampler>
            <Input   class='DataObjects'      type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='ExternalModel'        >polynomial</Model>
            <Output  class='DataObjects'      type='TimePointSet'         >TDsolns</Output>
        </MultiRun>
        <RomTrainer name='TDtrain'>
            <Input   class='DataObjects'      type='TimePointSet'         >TDsolns</Input>
            <Output  class='Models'           type='ROM'                  >TDROM</Output>
        </RomTrainer>
        <MultiRun name='TDtest' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>TDSG</Sampler>
            <Input   class='DataObjects'      type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='ROM'                  >TDROM</Model>
            <Output  class='DataObjects'      type='TimePointSet'         >TDtests</Output>
        </MultiRun>
        <IOStep name='TDprint'>
            <Input   class='DataObjects'      type='TimePointSet'         >TDtests</Input>
            <Output  class='OutStreamManager' type='Print'                >TDdump</Output>
        </IOStep>

        <MultiRun name='HCmake' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>HCSG</Sampler>
            <Input   class='DataObjects'      type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='ExternalModel'        >polynomial</Model>
            <Output  class='DataObjects'      type='TimePointSet'         >HCsolns</Output>
        </MultiRun>
        <RomTrainer name='HCtrain'>
            <Input   class='DataObjects'      type='TimePointSet'         >HCsolns</Input>
            <Output  class='Models'           type='ROM'                  >HCROM</Output>
        </RomTrainer>
        <MultiRun name='HCtest' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>HCSG</Sampler>
            <Input   class='DataObjects'      type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='ROM'                  >HCROM</Model>
            <Output  class='DataObjects'      type='TimePointSet'         >HCtests</Output>
        </MultiRun>
        <IOStep name='HCprint'>
            <Input   class='DataObjects'      type='TimePointSet'         >HCtests</Input>
            <Output  class='OutStreamManager' type='Print'                >HCdump</Output>
        </IOStep>

        <MultiRun name='Cmake' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>CSG</Sampler>
            <Input   class='DataObjects'      type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='ExternalModel'        >polynomial</Model>
            <Output  class='DataObjects'      type='TimePointSet'         >Csolns</Output>
        </MultiRun>
        <RomTrainer name='Ctrain'>
            <Input   class='DataObjects'      type='TimePointSet'         >Csolns</Input>
            <Output  class='Models'           type='ROM'                  >CROM</Output>
        </RomTrainer>
        <MultiRun name='Ctest' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>CSG</Sampler>
            <Input   class='DataObjects'      type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='ROM'                  >CROM</Model>
            <Output  class='DataObjects'      type='TimePointSet'         >Ctests</Output>
        </MultiRun>
        <IOStep name='Cprint'>
            <Input   class='DataObjects'      type='TimePointSet'         >Ctests</Input>
            <Output  class='OutStreamManager' type='Print'                >Cdump</Output>
        </IOStep>
    </Steps>

    <DataObjects>
        <TimePointSet name="dummyIN"><Input>x1,x2</Input><Output>OutputPlaceHolder</Output></TimePointSet>
        <TimePointSet name='TPtests'><Input>x1,x2</Input><Output>ans</Output></TimePointSet>
        <TimePointSet name='TPsolns'><Input>x1,x2</Input><Output>ans</Output></TimePointSet>
        <TimePointSet name='TDtests'><Input>x1,x2</Input><Output>ans</Output></TimePointSet>
        <TimePointSet name='TDsolns'><Input>x1,x2</Input><Output>ans</Output></TimePointSet>
        <TimePointSet name='HCtests'><Input>x1,x2</Input><Output>ans</Output></TimePointSet>
        <TimePointSet name='HCsolns'><Input>x1,x2</Input><Output>ans</Output></TimePointSet>
        <TimePointSet name='Ctests'><Input>x1,x2</Input><Output>ans</Output></TimePointSet>
        <TimePointSet name='Csolns'><Input>x1,x2</Input><Output>ans</Output></TimePointSet>
    </DataObjects>

    <OutStreamManager>
        <Print name='TPdump'>
            <type>csv</type>
            <source>TPtests</source>
        </Print>
        <Print name='TDdump'>
            <type>csv</type>
            <source>TDtests</source>
        </Print>
        <Print name='HCdump'>
            <type>csv</type>
            <source>HCtests</source>
        </Print>
        <Print name='Cdump'>
            <type>csv</type>
            <source>Ctests</source>
        </Print>
    </OutStreamManager>

</Simulation>
