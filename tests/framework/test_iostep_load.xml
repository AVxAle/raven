<?xml version="1.0" encoding="UTF-8"?>
<Simulation debug="True">
  <RunInfo>
    <RelativeWorkingDir>test_iostep_load</RelativeWorkingDir>
    <Files>ideal_pump.i,ideal_pump_control.py</Files>
    <Sequence>test_read_in,test_rewrite</Sequence>
    <batchSize>1</batchSize>
  </RunInfo>
  <Models>
    <Code name='MyRAVEN' subType='RAVEN'><executable>%FRAMEWORK_DIR%/../RAVEN-%METHOD%</executable></Code>
  </Models>
  <Samplers>
    <MonteCarlo     name='RAVENmc3'>
        <sampler_init>
            <limit>1</limit>
            <initial_seed>1</initial_seed>
        </sampler_init>
    </MonteCarlo>
  </Samplers>
  <Steps>
    <IOStep name='test_read_in' fromDirectory='../output_check'>
      <Input  class='DataObjects'    type='Histories'>fullprint_histories</Input>
      <Output   class='Databases' type='HDF5'   >MC_TEST_REWRITE</Output>
      <Input  class='DataObjects'    type='TimePoint'>fullprint_timepoint</Input>
      <Output   class='Databases' type='HDF5'   >MC_TEST_REWRITE</Output>
      <Input  class='DataObjects'    type='History'>fullprint_history</Input>
      <Output   class='Databases' type='HDF5'   >MC_TEST_REWRITE</Output>
      <Input  class='DataObjects'    type='TimePointSet'>fullprint_timepointset</Input>
      <Output   class='Databases' type='HDF5'   >MC_TEST_REWRITE</Output>
    </IOStep>
    <IOStep name='test_rewrite'>
      <Input class='DataObjects' type='History'>fullprint_history</Input>
      <Input class='DataObjects' type='Histories'>fullprint_histories</Input>
      <Input class='DataObjects' type='TimePoint'>fullprint_timepoint</Input>
      <Input class='DataObjects' type='TimePointSet'>fullprint_timepointset</Input>
      <!-- <Input   class='Databases' type='HDF5'   >MC_TEST_PUSH_STEP</Input>-->
      <!-- <Output class='OutStreamManager' type='Print'>reprint_timepointset</Output>-->
      <Output class='OutStreamManager' type='Print'>reprint_timepoint</Output>
      <Output class='OutStreamManager' type='Print'>reprint_timepointset</Output>
      <Output class='OutStreamManager' type='Print'>reprint_history</Output>
      <Output class='OutStreamManager' type='Print'>reprint_histories</Output>

    </IOStep>
  </Steps>
  <Databases>
    <HDF5 name="MC_TEST_REWRITE"/>
  </Databases>
  <OutStreamManager>
    <Print name='timepointset_from_database_dump'>
      <type>csv</type>
      <source>timepointset_from_database</source>
    </Print>
    <Print name='timepointset_IN_database_dump'>
      <type>csv</type>
      <source>timepointset_IN_database</source>
    </Print>

  </OutStreamManager>


  <DataObjects>
    <Histories name='fullprint_histories'>
      <Input>pipe1_Area,pipe1_Dh</Input>
      <Output>pipe1_Hw,pump_mass_flow_rate,time</Output>
    </Histories>
    <TimePointSet name='fullprint_timepointset'>
      <Input>pipe1_Area,pipe1_Dh</Input>
      <Output>pipe1_Hw,pump_mass_flow_rate,time</Output>
    </TimePointSet>
    <TimePoint name='fullprint_timepoint'>
      <Input>pipe1_Area,pipe1_Dh</Input>
      <Output>pipe1_Hw,pump_mass_flow_rate,time</Output>
    </TimePoint>
    <History name='fullprint_history'>
      <Input>pipe1_Area,pipe1_Dh</Input>
      <Output>pipe1_Hw,pump_mass_flow_rate,time</Output>
    </History>
  </DataObjects>

  <OutStreamManager>
    <Print name='reprint_histories'>
      <type>csv</type>
      <source>fullprint_histories</source>
    </Print>
    <Print name='reprint_history'>
      <type>csv</type>
      <source>fullprint_history</source>
    </Print>
    <Print name='reprint_timepoint'>
      <type>csv</type>
      <source>fullprint_timepoint</source>
    </Print>
    <Print name='reprint_timepointset'>
      <type>csv</type>
      <source>fullprint_timepointset</source>
    </Print>
  </OutStreamManager>
</Simulation>
