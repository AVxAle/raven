<?xml version="1.0" encoding="UTF-8"?>
<Simulation verbosity='debug'>
<RunInfo>
    <WorkingDir>basicStatistics</WorkingDir>
    <Files>basicStatisticsExternalModelTest.py,output_basicStatistics_PP1.csv,output_basicStatistics_PP2.csv,output_basicStatistics_PP3.csv,output_basicStatistics_PP4.csv</Files>
    <Sequence>FirstMRun,PP1,PP2,PP3,PP4</Sequence>
    <batchSize>1</batchSize>
</RunInfo>

<Models>
    <ExternalModel name='PythonModule' subType='' ModuleToLoad='basicStatistics/basicStatisticsExternalModelTest'>
       <variable>x</variable>
       <variable>y</variable>
       <variable>z</variable>
       <variable>time</variable>
       <variable>x0</variable>
       <variable>x01</variable>
       <variable>x02</variable>
       <variable>y0</variable>
       <variable>y02</variable>
       <variable>y01</variable>
       <variable>z0</variable>
       <variable>z02</variable>
       <variable>z01</variable>
    </ExternalModel>
    <PostProcessor name="autoCorrelationTest" subType='BasicStatistics'  verbosity='debug'>
        <!-- => you can here specify what type of figure of merit you need to compute
           <what>expectedValue,sigma,variance,kurtois,pearson,covariance</what>
         -->
        <what>expectedValue</what>
        <parameters>x01,x02</parameters>
        <methodsToRun>failureProbability</methodsToRun>
    </PostProcessor>
    <PostProcessor name="NotCorrellatedTest" subType='BasicStatistics' verbosity='debug'>
        <what>all</what>
        <biased>true</biased>
        <parameters>y01,y02</parameters>
    </PostProcessor>
    <PostProcessor name="InverseCorrelatedTest" subType='BasicStatistics'  verbosity='debug'>
        <what>all</what>
        <parameters>z01,z02</parameters>
    </PostProcessor>
    <PostProcessor name="InputOutput" subType='BasicStatistics' verbosity='debug'>
        <what>all</what>
        <parameters>x0,x01,y0,y02</parameters>
    </PostProcessor>
</Models>
<Functions>
    <External name='testFunctionComputeProbability' file='basicStatistics/testFunctionComputeProbability'>
        <variable>x01</variable>
    </External>
</Functions>

<Distributions>
    <Normal name='x0_distrib'>
        <mean>4</mean>
        <sigma>1</sigma>
    </Normal>
    <Normal name='y0_distrib'>
        <mean>100</mean>
        <sigma>1</sigma>
    </Normal>
    <Normal name='z0_distrib'>
        <mean>4</mean>
        <sigma>1</sigma>
    </Normal>
</Distributions>

<Samplers>
    <MonteCarlo name='MC_external'>
      <sampler_init>
        <limit>4</limit>
      </sampler_init>
      <variable name='x0' >
        <distribution>x0_distrib</distribution>
      </variable>
      <variable name='y0' >
        <distribution>y0_distrib</distribution>
      </variable>
      <variable name='z0' >
        <distribution>z0_distrib</distribution>
      </variable>
    </MonteCarlo>
</Samplers>

<Steps>
    <MultiRun name='FirstMRun'  re-seeding='25061978'>
        <Input   class='Files'     type=''               >basicStatisticsExternalModelTest.py</Input>
        <Model   class='Models'    type='ExternalModel'  >PythonModule</Model>
        <Sampler class='Samplers'  type='MonteCarlo'     >MC_external</Sampler>
        <Output  class='DataObjects'     type='TimePointSet'   >TimePointSetPostProcTest</Output>
        <Output  class='OutStreamManager' type='Print'   >TimePointSetPostProcTest_dump</Output>
    </MultiRun >
    <PostProcess name='PP1'>
        <Input    class='DataObjects'            type='TimePointSet'    >TimePointSetPostProcTest</Input>
        <Function class='Functions'        type='External'        >testFunctionComputeProbability</Function>
        <Model    class='Models'           type='PostProcessor'   >autoCorrelationTest</Model>
        <Output   class='Files'            type=''                >output_basicStatistics_PP1.csv</Output>
    </PostProcess>
    <PostProcess name='PP2'>
        <Input   class='DataObjects'            type='TimePointSet'    >TimePointSetPostProcTest</Input>
        <Model   class='Models'           type='PostProcessor'   >NotCorrellatedTest</Model>
        <Output   class='Files'           type=''                >output_basicStatistics_PP2.csv</Output>
    </PostProcess>
    <PostProcess name='PP3'>
        <Input   class='DataObjects'            type='TimePointSet'    >TimePointSetPostProcTest</Input>
        <Model   class='Models'           type='PostProcessor'   >InverseCorrelatedTest</Model>
        <Output   class='Files'           type=''                >output_basicStatistics_PP3.csv</Output>
    </PostProcess>
    <PostProcess name='PP4'>
        <Input   class='DataObjects'            type='TimePointSet'    >TimePointSetPostProcTest</Input>
        <Model   class='Models'           type='PostProcessor'   >InputOutput</Model>
        <Output   class='Files'           type=''                >output_basicStatistics_PP4.csv</Output>
    </PostProcess>
</Steps>

<OutStreamManager>
  <Print name='TimePointSetPostProcTest_dump'>
    <type>csv</type>
    <source>TimePointSetPostProcTest</source>
  </Print>
</OutStreamManager>


<DataObjects>
    <TimePointSet name='TimePointSetPostProcTest'>
        <Input>x0,y0,z0</Input>
        <Output>time,x02,y02,z02,x01,y01,z01,x,y,z</Output>
    </TimePointSet>
</DataObjects>


</Simulation>



