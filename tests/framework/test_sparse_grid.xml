<?xml version="1.0" encoding="UTF-8"?>
<Simulation debug="False">
    <RunInfo>
        <WorkingDir>SparseGridTest</WorkingDir>
        <Sequence>makeTP,makeTD,makeHC</Sequence>
        <batchSize>1</batchSize>
    </RunInfo>

    <Distributions>
        <Uniform name="UniDist1">
            <low>1</low>
            <high>5</high>
        </Uniform>
         <Uniform name="UniDist2">
            <low>1</low>
            <high>5</high>
        </Uniform>
    </Distributions>

    <Samplers>
        <SparseGridCollocation name="TPSG" parallel="1" outfile='testTPSG.csv'>
            <variable name="x1">
                <distribution>UniDist1</distribution>
            </variable>
            <variable name="x2">
                <distribution>UniDist2</distribution>
            </variable>
<!--            <Assembler> -->
                <ROM              class = 'Models' type = 'ROM'         >TPROM</ROM>
                <TargetEvaluation class = 'Datas'  type = 'TimePointSet'>TPsolns</TargetEvaluation>
<!--            </Assembler> -->
        </SparseGridCollocation>
        <SparseGridCollocation name="TDSG" parallel="1" outfile='testTDSG.csv'>
            <variable name="x1">
                <distribution>UniDist1</distribution>
            </variable>
            <variable name="x2">
                <distribution>UniDist2</distribution>
            </variable>
<!--            <Assembler> -->
                <ROM              class = 'Models' type = 'ROM'         >TDROM</ROM>
                <TargetEvaluation class = 'Datas'  type = 'TimePointSet'>TDsolns</TargetEvaluation>
<!--            </Assembler> -->
        </SparseGridCollocation>
        <SparseGridCollocation name="HCSG" parallel="1" outfile='testHCSG.csv'>
            <variable name="x1">
                <distribution>UniDist1</distribution>
            </variable>
            <variable name="x2">
                <distribution>UniDist2</distribution>
            </variable>
<!--            <Assembler> -->
                <ROM              class = 'Models' type = 'ROM'         >HCROM</ROM>
                <TargetEvaluation class = 'Datas'  type = 'TimePointSet'>HCsolns</TargetEvaluation>
<!--            </Assembler> -->
        </SparseGridCollocation>
    </Samplers>

    <Models>
        <Dummy name="MyDummy" subType="" print="True"/>
        <ROM name='TPROM' subType='GaussPolynomialRom'>
            <Target>ans</Target>
            <Features>x1,x2</Features>
            <IndexSet>HyperbolicCross</IndexSet>
            <PolynomialOrder>4</PolynomialOrder>
        </ROM>
        <ROM name='TDROM' subType='GaussPolynomialRom'>
            <Target>ans</Target>
            <Features>x1,x2</Features>
            <IndexSet>TotalDegree</IndexSet>
            <PolynomialOrder>4</PolynomialOrder>
        </ROM>
        <ROM name='HCROM' subType='GaussPolynomialRom'>
            <Target>ans</Target>
            <Features>x1,x2</Features>
            <IndexSet>HyperbolicCross</IndexSet>
            <PolynomialOrder>4</PolynomialOrder>
        </ROM>
    </Models>

    <Steps>
        <MultiRun name='makeTP' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>TPSG</Sampler>
            <Input   class='Datas'            type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='Dummy'                >MyDummy</Model>
            <Output  class='Datas'            type='TimePointSet'         >TPsolns</Output>
        </MultiRun>

        <MultiRun name='makeTD' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>TDSG</Sampler>
            <Input   class='Datas'            type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='Dummy'                >MyDummy</Model>
            <Output  class='Datas'            type='TimePointSet'         >TDsolns</Output>
        </MultiRun>

        <MultiRun name='makeHC' pauseAtEnd='False'>
            <Sampler class='Samplers'         type='SparseGridCollocation'>HCSG</Sampler>
            <Input   class='Datas'            type='TimePointSet'         >dummyIN</Input>
            <Model   class='Models'           type='Dummy'                >MyDummy</Model>
            <Output  class='Datas'            type='TimePointSet'         >TDsolns</Output>
        </MultiRun>
    </Steps>


    <Datas>
        <TimePointSet name="dummyIN">
            <Input>x1,x2</Input>
            <Output>OutputPlaceHolder</Output>
        </TimePointSet>
        <TimePointSet name='TPsolns'>
            <Input>x1,x2</Input>
            <Output>ans</Output>
        </TimePointSet>
        <TimePointSet name='TDsolns'>
            <Input>x1,x2</Input>
            <Output>ans</Output>
        </TimePointSet>
        <TimePointSet name='HCsolns'>
            <Input>x1,x2</Input>
            <Output>ans</Output>
        </TimePointSet>
    </Datas>

    <OutStreamManager>
        <Print name='TDdump'>
           <type>csv</type>
           <source>TDsolns</source>
        </Print>
        <Print name='HCdump'>
           <type>csv</type>
           <source>HCsolns</source>
        </Print>
    </OutStreamManager>
</Simulation>
