<?xml version="1.0" ?>
<Simulation verbosity="debug">
  <TestInfo>
    <name>framework.test_mpi_bison</name>
    <author>cogljj</author>
    <created>2014-02-06</created>
    <classesTested>Models.Code.MooseBasedApp, JobHandler.ExternalRunner</classesTested>
    <description>
       This test is aimed to check the capability of RAVEN to handle external codes that are MPI parallelized and multi-threaded.
    </description>
    <revisions>
      <revision author="alfoa" date="2015-05-18">Closes #167</revision>
      <revision author="alfoa" date="2015-05-29">finalized all the samplers</revision>
      <revision author="alfoa" date="2015-06-18">Changed Name of all DataObjects</revision>
      <revision author="alfoa" date="2015-09-12">removed syntax inconsistency with respect standards for Samplers (underscores instead of camelBack) + created conversion script</revision>
      <revision author="alfoa" date="2017-01-21">Adding this test description.</revision>
    </revisions>
  </TestInfo>
  <RunInfo>
    <WorkingDir>mpi_bison_test</WorkingDir>
    <Sequence>myLHS</Sequence>
    <batchSize>9</batchSize>
    <NumThreads>2</NumThreads>
    <mode>mpi</mode>
    <NumMPI>2</NumMPI>
  </RunInfo>

  <Files>
    <Input name="case_1.i" type="">case_1.i</Input>
    <Input name="case_1.e" type="">case_1.e</Input>
  </Files>

  <Models>
    <Code name="Bison" subType="MooseBasedApp">
      <executable>%FRAMEWORK_DIR%/../../bison/bison-%METHOD%</executable>
    </Code>
  </Models>

  <Distributions>
    <Normal name="Gauss1">
      <mean>1273.0</mean>
      <sigma>100.</sigma>
      <lowerBound>0</lowerBound>
      <upperBound>3000.0</upperBound>
    </Normal>
    <Normal name="Gauss2">
      <mean>0.1e6</mean>
      <sigma>0.1e5</sigma>
      <lowerBound>0</lowerBound>
      <upperBound>0.2e6</upperBound>
    </Normal>
  </Distributions>

  <Samplers>
    <Stratified name="myLHS">
      <samplerInit>
        <initialSeed>1</initialSeed>
      </samplerInit>
      <variable name="BCs|freesurf_temp|value">
        <distribution>Gauss1</distribution>
        <grid construction="equal" steps="9" type="CDF">0.01 0.91</grid>
      </variable>
      <variable name="BCs|exterior_pressure_y|factor">
        <distribution>Gauss2</distribution>
        <grid construction="equal" steps="9" type="CDF">0.09 0.99</grid>
      </variable>
    </Stratified>
  </Samplers>

  <DataObjects>
    <HistorySet name="stories">
      <Input>BCs|freesurf_temp|value,BCs|exterior_pressure_y|factor</Input>
      <Output>dt</Output>
    </HistorySet>
  </DataObjects>

  <Steps>
    <MultiRun name="myLHS">
      <Input class="Files" type="">case_1.i</Input>
      <Input class="Files" type="">case_1.e</Input>
      <Model class="Models" type="Code">Bison</Model>
      <Sampler class="Samplers" type="Stratified">myLHS</Sampler>
      <Output class="Databases" type="HDF5">test_bison_mpi_lhs</Output>
      <Output class="DataObjects" type="HistorySet">stories</Output>
    </MultiRun>
  </Steps>

  <Databases>
    <HDF5 name="test_bison_mpi_lhs" readMode="overwrite"/>
  </Databases>

</Simulation>
