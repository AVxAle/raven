<?xml version="1.0" ?>
<Simulation verbosity="debug">
    <RunInfo>
        <WorkingDir>ARMA</WorkingDir>
		<Sequence>readIn,readInGhostData,ARMATrain,runARMA,writeOut</Sequence>
        <batchSize>1</batchSize>
    </RunInfo>
    <Files>
        <Input name="rawDataFile">./dataSet.csv</Input>
		<Input name="ghostDataFile">./ghostData.csv</Input>
    </Files>
    <Distributions>
		<Uniform name="smallUniformDist">
			<lowerBound>2</lowerBound>
			<upperBound>3</upperBound>
		</Uniform>
	</Distributions>

	<Samplers>
		<MonteCarlo name="mcSampler">
			<samplerInit>
				<limit>1</limit>
				<initialSeed>888</initialSeed>
			</samplerInit>
			<variable name="Speed">
				<distribution>smallUniformDist</distribution>
			</variable>
		</MonteCarlo>
	</Samplers> 
	
	<Models>			
		<ROM name='ARMA' subType='ARMA'>
			<Target>Time</Target>
			<Features>Speed</Features>
			<Pmax>2</Pmax>
			<Pmin>2</Pmin>
			<Qmax>1</Qmax>
			<Qmin>1</Qmin>
			<Fourier>604800,86400</Fourier>
			<FourierOrder>2, 2</FourierOrder>
		</ROM>
    </Models>
    <Steps>
        <IOStep name='readIn' pauseAtEnd = 'True'>
            <Input    class = 'Files'             type = ''              >rawDataFile</Input>
            <Output   class = 'DataObjects'       type = 'HistorySet'       >rawData</Output>          
        </IOStep>
		<IOStep name='readInGhostData' pauseAtEnd = 'True'>
            <Input    class = 'Files'             type = ''              >ghostDataFile</Input>
            <Output   class = 'DataObjects'       type = 'PointSet'       >ghostData</Output>           
        </IOStep>
		<RomTrainer name='ARMATrain'>
			<Input    class = 'DataObjects'       type = 'HistorySet'       >rawData</Input>
			<Output   class='Models' 			  type ='ROM' 	 		 >ARMA</Output>
		</RomTrainer>
		<MultiRun name='runARMA'>
			<Input    class = 'DataObjects'       type = 'PointSet'       >ghostData</Input>
			<Sampler class="Samplers"  type="MonteCarlo"  >mcSampler</Sampler>
			<Model   class='Models' 			  type = 'ROM' 	 		 >ARMA</Model>
			<Output    class = 'DataObjects'       type = 'HistorySet'    >synData</Output> 
		</MultiRun>
        <IOStep name='writeOut' pauseAtEnd = 'True'>
			<Input    class = 'DataObjects'       type = 'HistorySet'    >synData</Input>		 			
			<Output   class = 'OutStreams'  type = 'Print'         >writeSynDataOut</Output>
			<Output   class = 'OutStreams'  type = 'Plot'         >plotSynData</Output> 
		</IOStep>	
    </Steps>
    <OutStreams>		
        <Print name = 'writeSynDataOut'>
            <type>csv</type>
            <source>synData</source>
        </Print>	
		<Plot dim="2" name="plotSynData" overwrite="false" >
			<plotSettings>
				<plot>
					<type>line</type>
					<x>synData|Output|Time</x>
					<y>synData|Output|Speed</y>
					<interpPointsX>52560</interpPointsX>
				</plot>
			</plotSettings>
			<actions>
				<range>
					<xmin>0</xmin><xmax>1209600</xmax>
				</range>
				<how>png</how>
			</actions>
	    </Plot>
	</OutStreams>
	
    <DataObjects>
        <HistorySet name="rawData">
            <Input>x</Input>
            <Output>Time,Speed</Output>
        </HistorySet>
		<PointSet name="ghostData">
            <Input>Speed</Input>
            <Output>y,z</Output>
        </PointSet>
		<HistorySet name="synData">
            <Input>y</Input>
            <Output>Time,Speed</Output>
        </HistorySet>
    </DataObjects>
</Simulation>

