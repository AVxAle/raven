<?xml version="1.0" encoding="UTF-8"?>
<Simulation verbosity="debug">


<RunInfo>
    <WorkingDir>interfacedPostProcessorParallel</WorkingDir>
    <Sequence>FirstMRun,PP</Sequence>
    <batchSize>1</batchSize>
    <internalParallel>True</internalParallel>
</RunInfo>

<Files>
  <Input name="lorentzAttractor.py" type="">lorentzAttractor.py</Input>
</Files>

<Steps>
    <MultiRun name="FirstMRun" pauseAtEnd="True">
      <Input   class="DataObjects"      type="Point"         >inputPlaceHolder</Input>
      <Model   class="Models"           type="ExternalModel" >PythonModule</Model>
      <Sampler class="Samplers"         type="MonteCarlo"    >MC_external</Sampler>
      <Output  class="DataObjects"      type="PointSet"      >outMC</Output>
      <Output  class="Databases"        type="HDF5"          >out_db</Output>
      <Output  class="OutStreamManager" type="Print"         >PrintHistorySet_dump</Output>
    </MultiRun>
    <PostProcess name="PP">
      <Input   class="DataObjects"      type="HistorySet"    >outMC</Input>
      <Model   class="Models"           type="PostProcessor" >interfacedPP1</Model>
      <Output  class="DataObjects"      type="HistorySet"    >outMC_PP</Output>
      <Output  class="OutStreamManager" type="Print"         >PrintPPHistorySet_dump</Output>
    </PostProcess>
</Steps>


<Models>
    <ExternalModel ModuleToLoad="lorentzAttractor" name="PythonModule" subType="">
      <variable>sigma</variable>
      <variable>rho</variable>
      <variable>beta</variable>
      <variable>x</variable>
      <variable>y</variable>
      <variable>z</variable>
      <variable>time</variable>
      <variable>x0</variable>
      <variable>y0</variable>
      <variable>z0</variable>
    </ExternalModel>
    <PostProcessor name="interfacedPP1" subType="InterfacedPostProcessor">
       <method>testInterfacedPP</method>
       <xmlNodeExample>9</xmlNodeExample>
    </PostProcessor>
</Models>


<Distributions>
  <Normal name="x0_distrib">
    <mean>4</mean>
    <sigma>1</sigma>
  </Normal>
  <Normal name="y0_distrib">
    <mean>4</mean>
    <sigma>1</sigma>
  </Normal>
  <Normal name="z0_distrib">
    <mean>4</mean>
    <sigma>1</sigma>
  </Normal>
</Distributions>


<Samplers>
  <MonteCarlo name="MC_external">
    <samplerInit>
      <limit>1</limit>
    </samplerInit>
    <variable name="x0">
      <distribution>x0_distrib</distribution>
    </variable>
    <variable name="y0">
      <distribution>y0_distrib</distribution>
    </variable>
    <variable name="z0">
      <distribution>z0_distrib</distribution>
    </variable>
  </MonteCarlo>
</Samplers>


<Databases>
  <HDF5 name="out_db"/>
</Databases>


<OutStreamManager>
  <Print name="PrintHistorySet_dump">
    <type>csv</type>
    <source>outMC</source>
  </Print>
  <Print name="PrintPPHistorySet_dump">
    <type>csv</type>
    <source>outMC_PP</source>
  </Print>
</OutStreamManager>


<DataObjects>
    <HistorySet name="outMC">
      <Input>x0,y0,z0</Input>
      <Output>time,x,y,z</Output>
    </HistorySet>
    <HistorySet name="outMC_PP">
      <Input>x0,y0,z0</Input>
      <Output>time,x,y,z</Output>
    </HistorySet>
    <Point name="inputPlaceHolder">
      <Input>x0,y0,z0</Input>
      <Output>OutputPlaceHolder</Output>
    </Point>
</DataObjects>


</Simulation>



