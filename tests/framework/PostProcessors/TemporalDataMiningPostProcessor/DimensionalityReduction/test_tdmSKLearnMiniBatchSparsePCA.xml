<?xml version="1.0" ?>
<Simulation verbosity="silent">
  <RunInfo>
    <WorkingDir>MiniBatchSparsePCA</WorkingDir>
    <Sequence>readIn,pp1</Sequence>
    <batchSize>100</batchSize>
  </RunInfo>

  <Files>
    <Input name="rawDataFile">../SKLearnDataIRIS/iris.csv</Input>
  </Files>

  <Models>
    <PostProcessor name="PCA" subType="DataMining">
      <KDD lib="temporalSciKitLearn">
        <Features>x1,x2,x3,x4</Features>
        <SKLtype>decomposition|MiniBatchSparsePCA</SKLtype>
        <n_components>2</n_components>
        <random_state>1</random_state>
        <shuffle>false</shuffle>
      </KDD>
    </PostProcessor>
  </Models>

  <Steps>
    <IOStep name='readIn' pauseAtEnd='True'>
      <Input    class='Files'             type=''              >rawDataFile</Input>
      <Output   class='DataObjects'       type='HistorySet'       >mData</Output>
    </IOStep>
    <PostProcess name='pp1' pauseAtEnd='True'>
      <Input   class='DataObjects'       type='HistorySet'      >mData</Input>
      <Model   class='Models'            type='PostProcessor' >PCA</Model>
      <Output  class='DataObjects' type='HistorySet'>mData</Output>
      <Output   class='OutStreams'  type='Print'         >dummy</Output>
      <Output   class='OutStreams'  type='Plot'          >plotPCAData</Output>
    </PostProcess>
  </Steps>

  <OutStreams>
    <Print name='dummy'>
      <type>csv</type>
      <source>mData</source>
    </Print>

    <Plot dim="2" name="plotPCAData" overwrite="True" >
      <plotSettings>
        <gridSpace>2 1</gridSpace>
        <plot>
          <type>line</type>
          <x>mData|Output|Time</x>
          <y>mData|Output|PCAPCAComponent1</y>
          <interpPointsX>300</interpPointsX>
          <gridLocation>
            <x>0</x>
            <y>0</y>
          </gridLocation>
        </plot>
        <plot>
          <type>line</type>
          <x>mData|Output|Time</x>
          <y>mData|Output|PCAPCAComponent2</y>
          <interpPointsX>300</interpPointsX>
          <gridLocation>
            <x>1</x>
            <y>0</y>
          </gridLocation>
        </plot>
      </plotSettings>
      <actions>
        <how>png</how>
      </actions>
    </Plot>
  </OutStreams>

  <DataObjects>
    <HistorySet name="mData">
      <Input>n</Input>
      <Output>Time,x1,x2,x3,x4</Output>
    </HistorySet>
  </DataObjects>
</Simulation>

