<?xml version="1.0" encoding="UTF-8"?>
<Simulation>
<RunInfo>
    <WorkingDir>test_rom_trainer_no_norm</WorkingDir>
    <Files>.</Files>
    <Sequence>MC_for_rom_trainer,dumpOutput,test_rom_trainer,rom_MC,test_rom_trainer_nd_interp,rom_MC_nd_interpolator</Sequence>
    <batchSize>8</batchSize>
</RunInfo>
<Distributions>
    <Normal name = 'x1_dst'>
        <upperBound>10</upperBound>
        <lowerBound>-10</lowerBound>
        <mean>0.5</mean>
        <sigma>0.1</sigma>
    </Normal>
    
    <Normal name = 'x2_dst'>
        <upperBound>10</upperBound>
        <lowerBound>-10</lowerBound>
        <mean>-0.15</mean>
        <sigma>0.05</sigma>
    </Normal>
    
    <Normal name = 'gammay_dst'>
        <upperBound>20</upperBound>
        <lowerBound>-20</lowerBound>
        <mean>0</mean>
        <sigma>15</sigma>
    </Normal>
</Distributions>
<Models>
    <ExternalModel name = 'asimplemodel' subType = '' ModuleToLoad = 'test_rom_trainer_no_norm/simpleExternalModel'>
        <variable>x1</variable>
        <variable>x2</variable>
        <variable>gammay</variable>
        <variable>g</variable>
    </ExternalModel>
    <ROM  name='ROM1' subType='SciKitLearn'>
      <Features>x1,x2,gammay</Features>
      <Target>g</Target>
      <NormalizeData>False</NormalizeData>
      <SKLtype>linear_model|Ridge</SKLtype>
      <fit_intercept>True</fit_intercept>
    </ROM>
    <ROM  name='ROM2' subType='NDinvDistWeigth'>
        <Features>x1,x2,gammay</Features>
        <Target>g</Target>
        <NormalizeData>False</NormalizeData>
        <p>1</p>
    </ROM>
</Models>
<Samplers>
  <MonteCarlo     name='RAVENmc3'  limit='3'>
      <variable name = 'x1' >
          <distribution>x1_dst</distribution>
      </variable>
      <variable name='x2' >
          <distribution>x2_dst</distribution>
      </variable>
      <variable name='gammay' >
          <distribution>gammay_dst</distribution>
      </variable>
  </MonteCarlo>
  <Grid name = 'grdForTrain'>
      <variable name = 'x1' >
          <distribution>x1_dst</distribution>
          <grid type = 'value' construction = 'equal' steps = '4' upperBound = '10'>5</grid>
      </variable>
      <variable name='x2' >
          <distribution>x2_dst</distribution>
          <grid type = 'value' construction = 'equal' steps = '4' upperBound = '10'>5</grid>
      </variable>
      <variable name='gammay' >
          <distribution>gammay_dst</distribution>
          <grid type = 'value' construction = 'equal' steps = '4' upperBound = '20'>10</grid>
      </variable>
  </Grid>
  <MonteCarlo     name='RAVENmcND'  limit='3' initial_seed='200286'>
        <variable name = 'x1' >
            <distribution>x1_dst</distribution>
        </variable>
        <variable name='x2' >
            <distribution>x2_dst</distribution>
        </variable>
        <variable name='gammay' >
            <distribution>gammay_dst</distribution>
        </variable>
  </MonteCarlo>
</Samplers>
<Steps debug='True'>
    <MultiRun name = 'MC_for_rom_trainer' pauseAtEnd = 'False' debug = 'True'>
        <Sampler class='Samplers'   type='Grid'         >grdForTrain</Sampler>
        <Input    class = 'Datas'     type = 'TimePointSet'   >DataForGrid</Input>
        <Model    class = 'Models'    type = 'ExternalModel'  >asimplemodel</Model>
        <Output   class = 'Datas'     type = 'TimePointSet'   >outputGrid</Output>
    </MultiRun >
    <IOStep name='dumpOutput' debug='True'>
        <Input   class = 'Datas'     type = 'TimePointSet'>outputGrid</Input>
        <Output  class='OutStreamManager' type='Print'    >ciccio</Output>
    </IOStep>
    <RomTrainer name='test_rom_trainer' debug='True'>
        <Input   class='Datas'  type='TimePointSet'>outputGrid</Input>
        <Output  class='Models' type='ROM'         >ROM1</Output>
    </RomTrainer>
    <RomTrainer name='test_rom_trainer_nd_interp'>
        <Input   class='Datas'  type='TimePointSet'>outputGrid</Input>
        <Output  class='Models' type='ROM'         >ROM2</Output>
    </RomTrainer>
    <MultiRun name='rom_MC' re-seeding='200286'>
        <Input   class='Datas'    type='TimePoint'   >data_for_sampling_empty_at_begin</Input>
        <Model   class='Models'   type='ROM'         >ROM1</Model>
        <Sampler class='Samplers' type='MonteCarlo'  >RAVENmc3</Sampler>
        <Output  class='Datas'    type='TimePointSet'>outputMontecarloRom</Output>
        <Output  class='OutStreamManager' type='Print'>outputMontecarloRom_dump</Output>
    </MultiRun>
    <MultiRun name='rom_MC_nd_interpolator'>
        <Input   class='Datas'    type='TimePoint'   >data_for_sampling_empty_at_begin_nd</Input>
        <Model   class='Models'   type='ROM'         >ROM2</Model>
        <Sampler class='Samplers' type='MonteCarlo'  >RAVENmcND</Sampler>
        <Output  class='Datas'    type='TimePointSet'>outputMontecarloRomND</Output>
        <Output  class='OutStreamManager' type='Print'>outputMontecarloRomND_dump</Output>
    </MultiRun>
</Steps>

<OutStreamManager>
  <Print name='outputMontecarloRom_dump'>
    <type>csv</type>
    <source>outputMontecarloRom</source>
  </Print>
  <Print name='outputMontecarloRomND_dump'>
    <type>csv</type>
    <source>outputMontecarloRomND</source>
  </Print>
  <Print name='ciccio'>
    <type>csv</type>
    <source>outputGrid</source>
  </Print>
</OutStreamManager>


<Datas>
    <TimePointSet name = 'DataForGrid'>
        <Input>x1,x2,gammay</Input>
        <Output>OutputPlaceHolder</Output>
    </TimePointSet>
    <TimePointSet name = 'outputGrid'>
        <Input>x1,x2,gammay</Input>
        <Output>g</Output>
    </TimePointSet>
   <TimePointSet name='timepointset_from_database_for_rom_trainer'>
       <Input>x1,x2,gammay</Input>
       <Output>g</Output>
   </TimePointSet>
   <TimePoint name='data_for_sampling_empty_at_begin'>
        <Input name="1">x1,x2,gammay</Input>
        <Output>OutputPlaceHolder</Output>
   </TimePoint>
    <TimePoint name='data_for_sampling_empty_at_begin_nd'>
        <Input name="1">x1,x2,gammay</Input>
        <Output>OutputPlaceHolder</Output>
    </TimePoint>
   <TimePointSet name='outputMontecarloRom'>
        <Input>x1,x2,gammay</Input>
        <Output>g</Output>
   </TimePointSet>
    <TimePointSet name='outputMontecarloRomND'>
        <Input>x1,x2,gammay</Input>
        <Output>g</Output>
    </TimePointSet>
</Datas>
</Simulation>



