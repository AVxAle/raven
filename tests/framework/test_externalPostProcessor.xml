<?xml version="1.0" ?>
<Simulation verbosity="debug">
  <RunInfo>
    <WorkingDir>externalPostProcessor</WorkingDir>
    <Sequence>
    loadData1,
    loadData2,
    applyFunctions,
    saveData
  </Sequence>

  </RunInfo>

  <Models>
    <PostProcessor name="functionPP" subType="External" verbosity="debug">
      <method>Delta,Sum,Norm,Mean,Max,Min,DoesNotExist</method>
      <Function class="Functions" type="External">basicOps</Function>
      <Function class="Functions" type="External">advOps</Function>
    </PostProcessor>
  </Models>

  <Functions>
    <External file="externalPostProcessor/BasicOperators" name="basicOps">
      <variable>X</variable>
      <variable>Y</variable>
    </External>
    <External file="externalPostProcessor/AdvancedOperators" name="advOps">
      <variable>A</variable>
      <variable>B</variable>
    </External>
  </Functions>

  <Steps>
    <IOStep fromDirectory="." name="loadData1">
      <Input class="DataObjects" type="PointSet">testData</Input>
      <Output class="Databases" type="HDF5">myDB</Output>
    </IOStep>
    <IOStep fromDirectory="." name="loadData2">
      <Input class="DataObjects" type="PointSet">testData2</Input>
      <Output class="Databases" type="HDF5">myDB</Output>
    </IOStep>
    <PostProcess name="applyFunctions">
      <Input class="DataObjects" type="PointSet">testData2</Input>
      <Input class="DataObjects" type="PointSet">testData</Input>
      <Model class="Models" type="PostProcessor">functionPP</Model>
      <Output class="DataObjects" type="PointSet">outTPS</Output>
    </PostProcess>
    <IOStep name="saveData">
      <Input class="DataObjects" type="PointSet">outTPS</Input>
      <Output class="OutStreamManager" type="Print">myDump</Output>
    </IOStep>
  </Steps>

  <OutStreamManager>
    <Print name="myDump">
      <type>csv</type>
      <source>outTPS</source>
    </Print>
  </OutStreamManager>

  <Databases>
    <HDF5 name="myDB"/>
  </Databases>

  <DataObjects>
    <PointSet name="testData">
      <Input>X,Y</Input>
      <Output>Z</Output>
    </PointSet>
    <PointSet name="testData2">
      <Input>A,B</Input>
      <Output>C</Output>
    </PointSet>
    <PointSet name="outTPS">
      <Input>A,B,X</Input>
      <Output>Z,Sum,Norm,advOps.Delta,Max</Output>
    </PointSet>
  </DataObjects>

</Simulation>
