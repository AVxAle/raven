<?xml version="1.0" encoding="UTF-8"?>
<Simulatio>
<RunInfo>
    <WorkingDir>/Users/alfoa/projects/trunk/raven/te_stDriver</WorkingDir>
    <Files>TMI_test_PRA_transient_less_w_MC.i,TMI_PRA_trans_MC_control.py,TMI_test_PRA_transient_less_w_ss_out_restart_0831_mesh.xda,TMI_test_PRA_transient_less_w_ss_out_restart_0831.ravenaux,TMI_test_PRA_transient_less_w_ss_out_restart_0831.xda,TMI_test_PRA_transient_less_w.i,TMI_test_PRA_transient_less_w.py,sss.i,DET_histories.csv</Files>
    <Sequence>FirstMRun,extract_hist_from_hdf5</Sequence>
    <batchSize>4</batchSize>
    <!--<ParallelCommand></ParallelCommand>
    <ParallelProcNumb></ParallelProcNumb>
    <ThreadingCommand></ThreadingCommand>
    <ThreadingProcessor></ThreadingProcessor>
    <numNode></numNode>
    <quequingSoftware></quequingSoftware>
    <procByNode></procByNode>
    <numProcByRun></numProcByRun>
    <totNumbCores></totNumbCores>-->
</RunInfo>

<Models>
    <Code name='MyRAVEN' type='RAVEN'>../RAVEN-opt</Code>
    <ROM name='MySVM' type='SVM'>
      <C>3.0</C>
      <cache_size>4000</cache_size>
      <max_iter>4000</max_iter>
      <degree>4</degree>
    </ROM>
    
    <Filter name='Plot1' type='Plot'> 
      <historyID>ALL</historyID>
      <variables>ALL</variables>
    </Filter>
</Models>
<Distributions>
    <Normal name='Gauss1'>
        <mean>1</mean>
        <sigma>0.001</sigma>
        <lowerBound>0</lowerBound>
        <upperBound>2</upperBound>
        <adjustement>up</adjustement>
    </Normal>
    <Normal name='auxBackUpTimeDist'>
        <mean>1</mean>
        <sigma>0.001</sigma>
        <lowerBound>0</lowerBound>
        <upperBound>2</upperBound>
        <adjustement>up</adjustement>
    </Normal>    
    <Normal name='Gauss2'>
        <mean>1</mean>
        <sigma>0.4</sigma>
        <lowerBound>0</lowerBound>
        <upperBound>2</upperBound>
        <adjustement>scaling</adjustement>
    </Normal>
    <Triangular name='CladFailureDist'>
        <apex>1</apex>
        <min>-0.1</min>
        <max>3</max>
<!--         <lowerBound>0</lowerBound> This is not yet supported
        <upperBound>2</upperBound>
        <adjustement>up</adjustement>  -->
    </Triangular>
</Distributions>


<Samplers>
    <MonteCarlo name='NotRAVENmc1' limit='200'>
        <Variable type ='Normal'     distName='Gaus1'>pippo</Variable>
        <Variable type ='Triangular' distName='Tri1'>pip</Variable> 
        <Variable type ='Normal'     distName='Gaus2'>pluto</Variable> 
    </MonteCarlo>
    <MonteCarlo name='MyMC1' limit='400'>
        <Variable type ='Normal'     distName='Gaus1'>pippo</Variable>
        <Variable type ='Triangular' distName='Tri1'>pip</Variable> 
        <Variable type ='Normal'     distName='Gaus2'>pluto</Variable> 
    </MonteCarlo>
    <LatinHyperCube name='MyLHC' limit='50' start='10'>
        <Variable type ='Normal'     distName='Gaus1'>pippo</Variable>
        <Variable type ='Triangular' distName='Tri1'>pip</Variable> 
        <Variable type ='Normal'     distName='Gaus2'>pluto</Variable> 
    </LatinHyperCube>
    <MonteCarlo     name='RAVENmc6'  limit='4'/>
    <MonteCarlo     name='RAVENmc50' limit='50'/>
    <LatinHyperCube name='MyLHC'     limit='50' start='10'></LatinHyperCube>
    <EquallySpaced  name='MyES'      limit='50' start='10'></EquallySpaced>
    <DynamicEventTree name='testDET' print_end_xml="avojia">
      <BranchingSettings  CPcut = '1.0E-99'>
        <Variable type='Normal' distName='auxBackUpTimeDist' BranchProbs='0.05 0.20'>auxBackUpTimeDist</Variable>
        <Variable type='Triangular' distName='CladFailureDist' BranchProbs='0.05 0.20'>CladFailureDist</Variable>
      </BranchingSettings>
    </DynamicEventTree> 
</Samplers>
<Tests>
    <Sigma  name='failurePB' tolerance ='0.00001'>cladFailure</Sigma>
    <Integral name='failure'  tolerance='0.00001' >cladFailure</Integral>
</Tests>
<Steps>
    <SimpleRun name='second'>
        <Input   type='Files'    subtype=''       >TMI_test_PRA_transient_less_w.i</Input>
        <Input   type='Files'    subtype=''       >TMI_test_PRA_transient_less_w.py</Input>
        <Model   type='Models'   subtype='Code'   >MyRAVEN</Model>
        <Output  type='Datas'    subtype='History'>1story</Output>
    </SimpleRun>
    <MultiRun name='FirstMRun'>
        <Input   type='Files'    subtype=''                >TMI_test_PRA_transient_less_w.i</Input>
        <Input   type='Files'    subtype=''                >TMI_test_PRA_transient_less_w.py</Input>
        <Model   type='Models'   subtype='Code'            >MyRAVEN</Model>
        <Sampler type='Samplers' subtype='DynamicEventTree'>testDET</Sampler>
        <DataSet type='DataSets' subtype=''                >testDataBase</DataSet>
        <Output  type='DataSets' subtype='HDF5'            >testDataBase</Output>
        <Output  type='Datas'    subtype='Histories'       >stories</Output>
    </MultiRun >
    <MultiRun name='test_plot'>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_MC.i</Input>
        <Input   type='Files'      subtype=''                >TMI_PRA_trans_MC_control.py</Input>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831.xda</Input>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831_mesh.xda</Input>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831.ravenaux</Input>
        <Model   type='Models'     subtype='Code'            >MyRAVEN</Model>
        <Sampler type='Samplers'   subtype='MonteCarlo'      >RAVENmc6</Sampler>
        <Output  type='OutStreams' subtype='Screen'          >testScreen</Output>
    </MultiRun >    
    <PostProcessing name='extract_hist_from_hdf5'>
        <Input   type='DataSets' subtype='HDF5'   >testDataBase</Input>
        <Model   type='Models'   subtype='Filter' >csv_from_hdf5</Model>
        <Output  type='Files'    subtype=''       >DET_histories.csv</Output>
    </PostProcessing>    
    <MultiRun name='MyAdaptiveNoROM'>
        <Input   type='Files'     subtype=''            >inp.i</Input>
        <Model   type='Models'    subtype='Code'        >MyRAVEN</Model>
        <Sampler type='Samplers'  subtype='MonteCarlo'  >MyMC1</Sampler>
        <Output  type='Datas'     subtype='TimePointSet'>finalPbconverged</Output>
        <Test    type='Sigma'     subtype=''       >failurePB</Test>
    </MultiRun>
    <MultiRun name='MyAdaptiveROM'>
        <ROM     type='Models'   subtype='ROM'         >MySVM</ROM>
        <Input   type='Files'    subtype=''            >sss</Input>
        <Model   type='Models'   subtype='Code'        >MyRAVEN</Model>
        <Sampler type='Samplers' subtype='MonteCarlo'  >MyMC</Sampler>
        <Output  type='Datas'    subtype='TimePointSet'>finalPbconverged</Output>
    </MultiRun>
    <PostProcessing name='plot'>
        <Input   type='Datasets'        subtype='HDF5'>testDataBase</Input>
        <Model   type='Models'          subtype='Filter'>Plot1</Model>
        <Output  type='outStream'       subtype='screen'></Output>
        <Output  type='outStream'       subtype='jpeg'>fileName</Output>
    </PostProcessing>
</Steps>
<OutStreams>
  <Screen name="testScreen">
    <variable>Head_PumpB,avg_temp_clad_CH1</variable>
  </Screen> 
</OutStreams>
<DataSets>
    <HDF5 name="testDataBase" type="DET"/> 
</DataSets>

<Datas>
    <Histories name='stories'>
        <Input>DeltaTimeScramToAux,CladTempTreshold</Input>
        <Output>avg_temp_clad_CH2,CladDamaged</Output>
   </Histories>
   <Histories name='stories_from_database'>
        <Input>DeltaTimeScramToAux,CladTempTreshold</Input>
        <Output>avg_temp_clad_CH2,CladDamaged</Output>
   </Histories>
    <TimePointSet name='trainer'          time='end'>
        <Input>DeltaTimeScramToAux,CladTempTreshold</Input>
        <Output>avg_temp_clad_CH2,CladDamaged</Output>
    </TimePointSet>
    <TimePoint    name='form3stories'     time='0.001'>
        <Input>pippo,pip,pluto</Input>
        <Output>cladFailure</Output>
    </TimePoint>
    <TimePoint    name='form1story'       time='end'>
        <Input>pippo,pip,pluto</Input>
        <Output>cladFailure</Output>
    </TimePoint>
    <TimePointSet name='finalPbconverged' time='end'>
        <Input>pippo,pip,pluto</Input>
        <Output>cladFailure</Output>
    </TimePointSet>
    <TimePointSet name='finalLSconverged' time='end'>
        <Input>pippo,pip,pluto</Input>
        <Output>cladFailure</Output>
    </TimePointSet>
    <TimePointSet name='PbfromROM'        time='end'>
        <Input>pippo,pip,pluto</Input>
        <Output>cladFailure</Output>
    </TimePointSet>
</Datas>
</Simulatio>



