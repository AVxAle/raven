<?xml version="1.0" encoding="UTF-8"?>
<!-- A Simple Example of the Approximate Morse-Smale Complex Interface -->
<Simulation>
<RunInfo>
  <WorkingDir>externalFunction_output</WorkingDir>
  <Sequence>
    loadData,
    Delta
  </Sequence>
</RunInfo>
<Models>
<!-- The definition of the topological partition and all of its parameters -->
  <PostProcessor name='Difference' subType='External' debug='true'>
    <method>Delta</method>
    <method A='X' B='Y'>DiffAB,Norm</method>
    <Assembler>
      <Function class='Functions' type='Basic'>BasicOperators</Function>
    </Assembler>
  </PostProcessor>
</Models>
<Functions>
    <External name='BasicOperators' file='./BasicOperators'>
        <variable>X</variable>
        <variable>Y</variable>
    </External>
<!--    <External name='BasicOperators' file='./testFunctionComputeProbability'>-->
<!--        <variable>x</variable>-->
<!--    </External>-->
</Functions>
<Steps>
<!-- Load the data from a csv into the hdf5 database used by this run -->
    <IOStep name='loadData' fromDirectory='../test_data'>
      <Input  class='Datas'    type='TimePointSet'>testData</Input>
      <Output   class='DataBases' type='HDF5'   >myDB</Output>
    </IOStep> 
<!-- Perform the difference operator -->
    <PostProcess name='Delta'>
        <Input   class='Datas'      type='TimePointSet'>testData</Input>
        <Model   class='Models'     type='PostProcessor'>Difference</Model>
        <Function class='Functions' type='External'>BasicOperators</Function>
        <Output  class='Datas'      type='TimePointSet'>outTPS</Output>
        <Output  class='OutStreamManager' type='Print'>myDump</Output>
    </PostProcess>
</Steps>

<OutStreamManager>
<!-- A csv file containing the output of the example -->
  <Print name='myDump'>
    <type>csv</type>
    <source>outTPS</source>
  </Print>
</OutStreamManager>

<DataBases>
<!-- The necessary database object -->
  <HDF5 name="myDB"/> 
</DataBases>
<Datas>
<!-- The input TimePointSet objects -->
  <TimePointSet name='testData'>
    <Input>X,Y</Input>
    <Output>Z</Output>
  </TimePointSet>
<!-- The output TimePointSet objects -->
  <TimePointSet name='outTPS'>
    <Input>X,Y</Input>
    <Output>Z</Output>
  </TimePointSet>
</Datas>
</Simulation>
