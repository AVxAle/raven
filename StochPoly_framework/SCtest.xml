<?xml version="1.0" encoding="UTF-8"?>
<Simulatio>
<RunInfo>
    <WorkingDir>./inputs</WorkingDir>
    <Files>TMI_test_PRA_transient_less_w_ss_out_restart_0831.rd-0,TMI_PRA_trans_MC_control.py,TMI_PRA_trans_SC_control.py,TMI.i,TMI_SC.i,TMI_test_PRA_transient_less_w_ss_out_restart_0831_mesh.xda,TMI_test_PRA_transient_less_w_ss_out_restart_0831.xda</Files>
    <Sequence>set_up_SC,create_ROM,solve_MC,sample_SC_ROM</Sequence>
    <!--Sequence>set_up_SC,create_ROM,solve_MC,sample_SC_ROM</Sequence-->
    <batchSize>16</batchSize>
</RunInfo>

<Models>
    <Code name='MyRAVENMOOSE' type='MooseBasedApp'>../RAVEN-opt</Code>
    <Code name='MyRAVEN' type='RAVEN'>../RAVEN-opt</Code>
    <ROM  name='SCrom'   type='StochasticPolynomials'>SCrom</ROM>
</Models>
<Distributions>
    <Uniform name='Uni1'>
        <low>0</low>
        <hi>30</hi>
    </Uniform>
    <!--
    <Gamma name='Uni1'>
        <low>0</low>
        <alpha>1</alpha>
        <beta>1</beta>
    </Gamma> -->
    <Uniform name='Uni2'>
        <low>0</low>
        <hi>30</hi>
    </Uniform>
    <Normal name='Gauss1'>
        <mean>2</mean>
        <sigma>3</sigma>
        <!-- <upperBound>2500</upperBound> -->
        <!-- <lowerBound>0</lowerBound> -->
    </Normal>
    <Normal name='Gauss2'>
        <mean>-3</mean>
        <sigma>1</sigma>
        <!-- <upperBound>10000000000000000</upperBound> -->
        <!-- <lowerBound>0</lowerBound> -->
    </Normal>
</Distributions>


<Samplers>
  <StochasticCollocation name='SC'>
      <!-- Variable type ='Normal' distName='Gauss1' polyOrder='2'>RavenAuxiliary|DG1recoveryTime|initial_value</Variable-->
      <!--Variable type ='Normal' distName='Gauss2' polyOrder='3'>RavenAuxiliary|SecPGrecoveryTime|initial_value</Variable-->
      <Variable type ='Uniform' distName='Uni1' polyOrder='3'>RavenAuxiliary|DG1recoveryTime|initial_value</Variable>
      <Variable type ='Uniform' distName='Uni2' polyOrder='2'>RavenAuxiliary|SecPGrecoveryTime|initial_value</Variable>
  </StochasticCollocation>
  <MonteCarlo     name='MC'    initial_seed ='0' limit='6'/>
  <MonteCarlo     name='MCSC'  initial_seed ='0' limit='6'>
      <Variable type ='Gamma' distName='Uni1' >DG1recoveryTime</Variable>
      <Variable type ='Normal' distName='Uni2' >SecPGrecoveryTime</Variable>
  </MonteCarlo>
  <MonteCarlo     name='MCSC'  limit='6' initial_seed='5'>
      <Variable type ='Uniform' distName='Uni1' >DG1recoveryTime</Variable>
      <Variable type ='Uniform' distName='Uni2' >SecPGrecoveryTime</Variable>
  </MonteCarlo>
</Samplers>


<Steps>
    <MultiRun name='set_up_SC'>
        <Input   type='Files'      subtype=''                >TMI_SC.i</Input>
        <Input   type='Files'      subtype=''                >TMI_PRA_trans_SC_control.py</Input>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831.xda</Input>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831_mesh.xda</Input>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831.rd-0</Input>
        <Model   type='Models'     subtype='Code'            >MyRAVEN</Model>
        <Sampler type='Samplers'   subtype='StochasticCollocation'>SC</Sampler>
        <Output  type='DataBases'  subtype='HDF5'           >SC_RUN</Output>
        <Output  type='Datas'  subtype='TimePointSet'           >output_set_up_SCC</Output>
    </MultiRun> 
    <SCRun name='create_ROM'>
        <Input type='DataBases'  subtype='HDF5'            >SC_RUN</Input>
        <ROM   type='Models'       subtype='StochasticCollocation'>SCrom</ROM>
        <Sampler type='Samplers'   subtype='StochasticCollocation'>SC</Sampler>
        <!-- This sampler here does not make senseâ€¦ It will be restructured soon. Andrea-->
        <!--Output  type='DataBases'  subtype='HDF5'           >SC_RUN</Output-->
    </SCRun> 
    <MultiRun name='solve_MC'>
        <!--<Input   type='Files'      subtype=''                >TMI.i</Input>
        <Input   type='Files'      subtype=''                >TMI_PRA_trans_MC_control.py</Input> -->
        <Input   type='Files'      subtype=''                >TMI_SC.i</Input>
        <Input   type='Files'      subtype=''                >TMI_PRA_trans_SC_control.py</Input>        
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831.xda</Input>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831_mesh.xda</Input>
        <Input   type='Files'      subtype=''                >TMI_test_PRA_transient_less_w_ss_out_restart_0831.rd-0</Input>
        <Model   type='Models'     subtype='Code'            >MyRAVENMOOSE</Model>
        <Sampler type='Samplers'   subtype='MonteCarlo'      >MC</Sampler>
        <!--Output  type='DataBases'  subtype='HDF5'            >MC_RUN</Output-->
        <Output  type='Datas'  subtype='TimePoint'           >data_for_sampling_empty_at_begin</Output>
        <Output  type='Datas'  subtype='TimePointSet'        >output_solve_MC</Output>
    </MultiRun> 
    <MultiRun name='sample_SC_ROM'>
        <Input   type='Datas'    subtype='TimePoint' >data_for_sampling_empty_at_begin</Input>
        <Model   type='Models'   subtype='ROM'         >SCrom</Model>
        <Sampler type='Samplers' subtype='MonteCarlo'  >MCSC</Sampler>
        <Output  type='Datas'    subtype='TimePointSet'>outputMontecarloRom</Output>
    </MultiRun>
    
    <!--Multirun name='sample_SC_ROM'>
        <Input   type='Models'      subtype='ROM'             >SCrom</Input>
        <Sampler type='Samplers'    subtype='RAVENmc6'        >MCSC</Sampler>
    </Multirun-->
</Steps>
<OutStreams>
  <Screen name="MCScreen">
    <variable>avg_temp_clad_CH1</variable>
  </Screen> 
</OutStreams>

<Datas>
   <TimePointSet name='timepointset_from_database_for_rom_trainer'>
        <Input>SecPGrecoveryTime,DG1recoveryTime</Input>
        <Output>avg_temp_clad_CH1</Output>
   </TimePointSet>
   <TimePoint name='data_for_sampling_empty_at_begin'>
        <Input name="1">SecPGrecoveryTime,DG1recoveryTime</Input>
        <Output>avg_temp_clad_CH1</Output>
   </TimePoint>
   <TimePointSet name='outputMontecarloRom' printCSV='t'>
        <Input>SecPGrecoveryTime,DG1recoveryTime</Input>
        <Output>avg_temp_clad_CH1</Output>
   </TimePointSet>
    <TimePointSet name='output_solve_MC' printCSV='t'>
        <Input>SecPGrecoveryTime,DG1recoveryTime</Input>
        <Output>avg_temp_clad_CH1</Output>
   </TimePointSet>
    <TimePointSet name='output_set_up_SCC' printCSV='t'>
        <Input>SecPGrecoveryTime,DG1recoveryTime</Input>
        <Output>avg_temp_clad_CH1</Output>
   </TimePointSet>
</Datas>

<DataBases>
  <HDF5 name='SC_RUN' type='MC' targetParam='avg_temp_clad_CH1' operator='max'/>
  <HDF5 name='SC_OUT' type='MC' targetParam='avg_temp_clad_CH1' operator='max'/>
</DataBases>



</Simulatio>



